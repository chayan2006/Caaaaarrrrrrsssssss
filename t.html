<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legislative Sentiment Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lucide-react@0.378.0/dist/lucide-react.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .sidebar-icon { width: 24px; height: 24px; stroke-width: 2; }
        .chart-container { position: relative; height: 300px; width: 100%; }
        .report-chart-container { position: relative; height: 450px; width: 100%; }
        .page-content { display: none; }
        .page-content.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        .hidden { display: none; }
        .toggle-checkbox:checked { right: 0; border-color: #4338ca; }
        .toggle-checkbox:checked + .toggle-label { background-color: #4338ca; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-slate-100">

    <!-- =========== CONTAINER 1: PROFESSIONAL LOGIN PAGE =========== -->
    <div id="login-container" class="min-h-screen flex items-center justify-center p-4 bg-cover bg-center" 
         style="background-image: url('https://images.unsplash.com/photo-1554435493-93422e82201c?q=80&w=2070&auto=format&fit=crop');">
        
        <div class="w-full max-w-md bg-white/80 backdrop-blur-sm p-8 rounded-2xl shadow-2xl border border-slate-200">
            <div class="flex justify-center mb-4">
                 <svg class="h-12 w-12 text-indigo-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/><path d="M12 20h4"/><path d="M12 4H8"/><path d="M20 12h-4"/><path d="M4 12h4"/></svg>
            </div>
            <h1 class="text-3xl font-bold text-center text-slate-800 mb-2">GovSentiment Portal</h1>
            <p class="text-slate-500 text-center mb-8">Please sign in to continue.</p>
            
            <form id="login-form">
                <div class="mb-5">
                    <label for="username" class="block text-sm font-medium text-slate-700 mb-2">Username</label>
                    <input type="text" id="username-input" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition" required>
                </div>
                <div class="mb-6">
                    <label for="password" class="block text-sm font-medium text-slate-700 mb-2">Password</label>
                    <input type="password" id="password-input" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition" required>
                </div>
                
                <p id="login-error" class="text-sm text-red-600 mb-4 text-center hidden"></p>
                
                <button type="submit" class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-all shadow-md hover:shadow-lg font-semibold text-lg">Sign In</button>
            </form>
            <p class="text-center text-xs text-slate-400 mt-10">&copy; 2025 Ministry of Legislative Affairs.</p>
        </div>
    </div>

    <!-- =========== CONTAINER 2: POORA DASHBOARD APP (Default mein chupa hua) =========== -->
    <div id="app-container" class="flex min-h-screen hidden">
        <aside class="w-20 lg:w-64 bg-white border-r border-slate-200 flex flex-col items-center lg:items-start p-4 transition-all duration-300">
            <div class="flex items-center justify-center lg:justify-start w-full mb-10">
                <svg class="h-8 w-8 text-indigo-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/><path d="M12 20h4"/><path d="M12 4H8"/><path d="M20 12h-4"/><path d="M4 12h4"/></svg>
                <h1 class="text-xl font-bold text-slate-800 ml-3 hidden lg:block">GovSentiment</h1>
            </div>
            <nav id="sidebar-nav" class="flex flex-col space-y-4 w-full">
                <a href="#" class="nav-link flex items-center p-3 bg-indigo-100 text-indigo-600 rounded-lg" aria-current="page" data-target="page-dashboard"><svg class="sidebar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 20V10a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v10"/><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/><path d="M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2"/></svg><span class="ml-4 font-semibold hidden lg:block">Dashboard</span></a>
                <a href="#" class="nav-link flex items-center p-3 text-slate-600 hover:bg-slate-100 rounded-lg" data-target="page-reports"><svg class="sidebar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></svg><span class="ml-4 font-semibold hidden lg:block">Reports</span></a>
                <a href="#" class="nav-link flex items-center p-3 text-slate-600 hover:bg-slate-100 rounded-lg" data-target="page-users"><svg class="sidebar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg><span class="ml-4 font-semibold hidden lg:block">Users</span></a>
                <a href="#" class="nav-link flex items-center p-3 text-slate-600 hover:bg-slate-100 rounded-lg" data-target="page-settings"><svg class="sidebar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg><span class="ml-4 font-semibold hidden lg:block">Settings</span></a>
            </nav>
            <div class="mt-auto flex flex-col w-full items-center lg:items-start">
                <div class="flex items-center p-3 text-slate-600 cursor-pointer">
                    <img id="sidebar-avatar-img" src="https://placehold.co/40x40/E2E8F0/475569?text=R" alt="User Avatar" class="rounded-full">
                    <div class="ml-3 hidden lg:block">
                        <p id="sidebar-username" class="font-semibold text-sm">Ridhima</p>
                        <p class="text-xs text-slate-500">Admin</p>
                    </div>
                </div>
                <button id="logout-button" class="w-full flex items-center p-3 text-red-500 hover:bg-red-50 rounded-lg mt-2">
                    <svg class="sidebar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    <span class="ml-4 font-semibold hidden lg:block">Logout</span>
                </button>
            </div>
        </aside>

        <main class="flex-1 p-6 lg:p-10">
            <div id="page-dashboard" class="page-content active">
                <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h1 class="text-3xl font-bold text-slate-800">Draft Legislation Feedback</h1>
                        <p class="text-slate-500 mt-1">Review and analyze stakeholder comments.</p>
                    </div>
                    <div class="flex items-center space-x-2 mt-4 md:mt-0">
                        <button class="flex items-center bg-white border border-slate-300 text-slate-700 px-4 py-2 rounded-lg hover:bg-slate-50 transition">
                            <svg class="h-5 w-5 mr-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
                            Export Analysis
                        </button>
                        <button class="flex items-center bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition shadow-sm">
                            <svg class="h-5 w-5 mr-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                            Import Comments
                        </button>
                    </div>
                </header>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm transition-all duration-300 hover:shadow-lg hover:-translate-y-1"><div class="flex justify-between items-start"><h3 class="text-slate-500 font-medium">Total Comments</h3><div class="p-2 bg-indigo-100 rounded-lg"><svg class="h-6 w-6 text-indigo-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></div></div><p id="stat-total" class="text-4xl font-bold text-slate-800 mt-2">0</p><p id="stat-total-sub" class="text-sm text-slate-500 flex items-center mt-1">Total results</p></div>
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm transition-all duration-300 hover:shadow-lg hover:-translate-y-1"><div class="flex justify-between items-start"><h3 class="text-slate-500 font-medium">Positive</h3><div class="p-2 bg-green-100 rounded-lg"><svg class="h-6 w-6 text-green-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 10v12"/><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a2 2 0 0 1 1.79 1.11L15 5.88z"/></svg></div></div><p id="stat-positive" class="text-4xl font-bold text-slate-800 mt-2">0</p><p id="stat-positive-sub" class="text-sm text-slate-500 mt-1">0% of total</p></div>
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm transition-all duration-300 hover:shadow-lg hover:-translate-y-1"><div class="flex justify-between items-start"><h3 class="text-slate-500 font-medium">Negative</h3><div class="p-2 bg-red-100 rounded-lg"><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 14V2"/><path d="M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a2 2 0 0 1-1.79-1.11L9 18.12z"/></svg></div></div><p id="stat-negative" class="text-4xl font-bold text-slate-800 mt-2">0</p><p id="stat-negative-sub" class="text-sm text-slate-500 mt-1">0% of total</p></div>
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm transition-all duration-300 hover:shadow-lg hover:-translate-y-1"><div class="flex justify-between items-start"><h3 class="text-slate-500 font-medium">Neutral</h3><div class="p-2 bg-yellow-100 rounded-lg"><svg class="h-6 w-6 text-yellow-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" x2="16" y1="12" y2="12"/></svg></div></div><p id="stat-neutral" class="text-4xl font-bold text-slate-800 mt-2">0</p><p id="stat-neutral-sub" class="text-sm text-slate-500 mt-1">0% of total</p></div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <div class="lg:col-span-1 bg-white p-6 rounded-xl border border-slate-200 shadow-sm"><h3 class="text-lg font-semibold text-slate-800 mb-4">Sentiment Distribution</h3><div class="chart-container"><canvas id="sentimentChart"></canvas></div></div>
                    <div class="lg:col-span-2 bg-white p-6 rounded-xl border border-slate-200 shadow-sm"><h3 class="text-lg font-semibold text-slate-800 mb-4">Top Keywords</h3><div id="keyword-list" class="space-y-3 overflow-y-auto" style="height: 300px;"></div></div>
                </div>
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4"><h3 class="text-lg font-semibold text-slate-800">Individual Comments</h3><div class="flex items-center space-x-2 mt-4 md:mt-0 w-full md:w-auto"><div class="relative w-full md:w-64"><input type="text" id="searchInput" placeholder="Search comments..." class="w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"><svg class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg></div><select id="sentimentFilter" class="border border-slate-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"><option value="all">All Sentiments</option><option value="positive">Positive</option><option value="negative">Negative</option><option value="neutral">Neutral</option></select></div></div>
                    <div class="overflow-x-auto"><table class="w-full text-sm text-left text-slate-500"><thead class="text-xs text-slate-700 uppercase bg-slate-50"><tr><th scope="col" class="px-6 py-4 font-semibold">Comment Summary</th><th scope="col" class="px-6 py-4 font-semibold">Sentiment</th><th scope="col" class="px-6 py-4 font-semibold">Keywords</th><th scope="col" class="px-6 py-4 font-semibold">Provision</th><th scope="col" class="px-6 py-4 font-semibold text-center">Actions</th></tr></thead><tbody id="commentsTableBody"></tbody></table></div>
                    <div class="flex justify-between items-center mt-4"><span class="text-sm text-slate-500" id="paginationInfo"></span><div class="flex items-center space-x-1" id="paginationControls"></div></div>
                </div>
            </div>
            <div id="page-reports" class="page-content">
                 <h1 class="text-3xl font-bold text-slate-800 mb-4">Sentiment by Provision Report</h1>
                 <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm"><p class="text-slate-600 mb-4">Yeh report har legislative provision ke hisaab se comments ko baant ti hai, aur har provision ka sentiment split dikhati hai.</p><div class="report-chart-container"><canvas id="provisionChart"></canvas></div></div>
            </div>
            <div id="page-users" class="page-content">
                 <h1 class="text-3xl font-bold text-slate-800 mb-4">User Management</h1>
                 <div class="bg-white rounded-xl border border-slate-200 shadow-sm"><div class="flex justify-between items-center p-4 border-b"><h3 class="text-lg font-semibold text-slate-800">All Users</h3><button class="flex items-center bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition shadow-sm text-sm font-medium"><svg class="h-4 w-4 mr-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>Add User</button></div><div class="overflow-x-auto"><table class="w-full text-sm text-left text-slate-500"><thead class="text-xs text-slate-700 uppercase bg-slate-50"><tr><th scope="col" class="px-6 py-3">Name</th><th scope="col" class="px-6 py-3">Email</th><th scope="col" class="px-6 py-3">Role</th><th scope="col" class="px-6 py-3">Status</th><th scope="col" class="px-6 py-3 text-center">Actions</th></tr></thead><tbody><tr class="bg-white border-b hover:bg-slate-50"><td class="px-6 py-4 font-medium text-slate-900">Ridhima</td><td class="px-6 py-4">ridhima.admin@gov.mail</td><td class="px-6 py-4">Admin</td><td class="px-6 py-4"><span class="px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800">Active</span></td><td class="px-6 py-4 text-center font-medium"><a href="#" class="text-indigo-600 hover:underline">Edit</a></td></tr><tr class="bg-white border-b hover:bg-slate-50"><td class="px-6 py-4 font-medium text-slate-900">Jane Smith</td><td class="px-6 py-4">jane.smith@gov.mail</td><td class="px-6 py-4">Analyst</td><td class="px-6 py-4"><span class="px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800">Active</span></td><td class="px-6 py-4 text-center font-medium"><a href="#" class="text-indigo-600 hover:underline">Edit</a></td></tr><tr class="bg-white border-b hover:bg-slate-50"><td class="px-6 py-4 font-medium text-slate-900">Robert Brown</td><td class="px-6 py-4">robert.brown@gov.mail</td><td class="px-6 py-4">Viewer</td><td class="px-6 py-4"><span class="px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800">Inactive</span></td><td class="px-6 py-4 text-center font-medium"><a href="#" class="text-indigo-600 hover:underline">Edit</a></td></tr></tbody></table></div></div>
            </div>
            <div id="page-settings" class="page-content">
                 <h1 class="text-3xl font-bold text-slate-800 mb-4">Settings</h1>
                 <div class="bg-white rounded-xl border border-slate-200 max-w-2xl shadow-sm"><div class="p-6 border-b"><h3 class="text-lg font-semibold text-slate-800">Profile</h3><p class="text-sm text-slate-500">Yeh jaankari aapke account se judi hai.</p></div><div class="p-6 space-y-4"><div><label for="name" class="block text-sm font-medium text-slate-700">Name</label><input type="text" id="name" value="Ridhima" disabled class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm bg-slate-100 text-slate-500 cursor-not-allowed sm:text-sm"></div><div><label for="email" class="block text-sm font-medium text-slate-700">Email</label><input type="email" id="email" value="ridhima.admin@gov.mail" disabled class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm bg-slate-100 text-slate-500 cursor-not-allowed sm:text-sm"></div></div><div class="p-6 border-t"><h3 class="text-lg font-semibold text-slate-800">Notifications</h3><p class="text-sm text-slate-500">Manage karein ki aapko alerts kaise milte hain.</p></div><div class="p-6 space-y-4"><div class="relative flex items-center justify-between"><div><span class="font-medium text-slate-800">Daily Digest Email</span><p class="text-sm text-slate-500">Har subah sabhi comments ka summary prapt karein.</p></div><div class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"><input type="checkbox" name="toggle-1" id="toggle-1" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" checked/><label for="toggle-1" class="toggle-label block overflow-hidden h-6 rounded-full bg-slate-300 cursor-pointer"></label></div></div><div class="relative flex items-center justify-between"><div><span class="font-medium text-slate-800">New Comment Alerts</span><p class="text-sm text-slate-500">Jab bhi naya comment import ho, ek email prapt karein.</p></div><div class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"><input type="checkbox" name="toggle-2" id="toggle-2" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"/><label for="toggle-2" class="toggle-label block overflow-hidden h-6 rounded-full bg-slate-300 cursor-pointer"></label></div></div></div><div class="px-6 py-4 bg-slate-50 border-t text-right rounded-b-xl"><button class="flex items-center bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition shadow-sm text-sm font-medium ml-auto">Save Changes</button></div></div>
            </div>
            <footer class="text-center mt-10 text-sm text-slate-500"><p>Ministry of Legislative Affairs | GovSentiment Analysis Portal</p></footer>
        </main>
    </div>

    <div id="view-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 hidden"><div class="bg-white w-full max-w-2xl rounded-xl shadow-lg border p-6 relative"><button id="close-modal-btn" class="absolute top-4 right-4 text-slate-500 hover:text-slate-800"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button><h2 id="modal-title" class="text-xl font-bold text-slate-800 mb-2">Comment Details</h2><p id="modal-provision" class="text-sm text-slate-500 mb-4">Provision</p><div id="modal-sentiment" class="mb-4"></div><div class="bg-slate-50 p-4 rounded-lg border"><h4 class="font-semibold text-slate-700 mb-1">Full Comment Text:</h4><p id="modal-full-text" class="text-slate-600 whitespace-pre-wrap"></p></div></div></div>
    
    <template id="comment-row-template">
        <tr class="bg-white border-b hover:bg-slate-50">
            <td class="px-6 py-4 font-medium text-slate-900 data-summary">Summary placeholder<p class="font-normal text-slate-500 mt-1 italic line-clamp-1 data-text">"Full text placeholder"</p></td>
            <td class="px-6 py-4"><span class="px-2 py-1 text-xs font-medium rounded-full data-sentiment">Sentiment</span></td>
            <td class="px-6 py-4"><div class="flex flex-wrap gap-1 data-keywords"></div></td>
            <td class="px-6 py-4 data-provision">Provision placeholder</td>
            <td class="px-6 py-4 text-center"><div class="flex justify-center items-center space-x-1"><button class="p-1.5 text-slate-500 hover:text-red-600 hover:bg-slate-100 rounded-full transition-colors action-flag" title="Flag Comment"><svg class="h-5 w-5 pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" x2="4" y1="22" y2="15"/></svg></button><button class="p-1.5 text-slate-500 hover:text-indigo-600 hover:bg-slate-100 rounded-full transition-colors action-view" title="View Details"><svg class="h-5 w-5 pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg></button></div></td>
        </tr>
    </template>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const loginContainer = document.getElementById('login-container');
            const appContainer = document.getElementById('app-container');
            const loginForm = document.getElementById('login-form');
            const usernameInput = document.getElementById('username-input');
            const passwordInput = document.getElementById('password-input');
            const loginError = document.getElementById('login-error');
            const sidebarUsername = document.getElementById('sidebar-username');
            const sidebarAvatarImg = document.getElementById('sidebar-avatar-img');

            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const username = usernameInput.value.trim().toLowerCase();
                const password = passwordInput.value.trim();

                if (username === 'admin' && password === '12345') {
                    loginContainer.classList.add('hidden');
                    appContainer.classList.remove('hidden');
                    runDashboardApp();
                } else {
                    loginError.textContent = 'Galat username ya password.';
                    loginError.classList.remove('hidden');
                }
            });
            
            function runDashboardApp() {
                const mockComments = [
                    { id: 1, text: "This is an excellent proposal. The focus on renewable energy is crucial for our future and will create jobs. We fully support Section 3.", sentiment: "positive", summary: "Strongly supports renewable energy...", keywords: ["renewable energy", "jobs", "support"], provision: "Section 3: Energy" },
                    { id: 2, text: "I have serious concerns about the financial implications of Article 5. It seems rushed and could negatively impact small businesses.", sentiment: "negative", summary: "Expresses concern over financial impacts...", keywords: ["financial implications", "small businesses", "concerns"], provision: "Article 5: Finance" },
                    { id: 3, text: "The document is comprehensive, but the timeline for implementation seems unrealistic. More clarification is needed on the rollout plan.", sentiment: "neutral", summary: "Finds document thorough but questions timeline...", keywords: ["timeline", "implementation", "clarification"], provision: "General" },
                    { id: 4, text: "A fantastic step forward for environmental protection. The new regulations on emissions are long overdue and much needed.", sentiment: "positive", summary: "Praises new emission regulations...", keywords: ["environmental", "regulations", "emissions"], provision: "Section 2: Environment" },
                    { id: 5, text: "This will be a bureaucratic nightmare. The reporting requirements in Part B are overly complex and will stifle innovation.", sentiment: "negative", summary: "Criticizes Part B's reporting requirements...", keywords: ["bureaucratic", "reporting", "complex"], provision: "Part B: Reporting" },
                    { id: 6, text: "The definitions in the introductory section are clear and well-written. This sets a good foundation for the rest of the document.", sentiment: "positive", summary: "Commends clarity of definitions...", keywords: ["definitions", "clarity", "foundation"], provision: "Introduction" },
                    { id: 7, text: "I don't see how this will be enforced. The penalties for non-compliance are too weak to be a real deterrent.", sentiment: "negative", summary: "Questions enforceability due to weak penalties...", keywords: ["enforcement", "penalties", "non-compliance"], provision: "Section 7: Enforcement" },
                    { id: 8, text: "We appreciate the opportunity to provide feedback. The proposed changes seem reasonable on the surface.", sentiment: "neutral", summary: "Views proposed changes as reasonable...", keywords: ["feedback", "changes", "reasonable"], provision: "General" },
                    { id: 9, text: "This legislation is a game-changer for our industry! The tax incentives will spur incredible growth and innovation.", sentiment: "positive", summary: "Enthusiastically supports tax incentives...", keywords: ["tax incentives", "growth", "innovation"], provision: "Article 6: Taxation" },
                    { id: 10, text: "The privacy considerations have not been adequately addressed. Section 4 needs a complete rewrite to protect citizen data.", sentiment: "negative", summary: "Argues privacy issues are inadequately handled...", keywords: ["privacy", "citizen data", "rewrite"], provision: "Section 4: Data Privacy" },
                    { id: 11, text: "The public consultation period was too short. Many stakeholders did not have enough time to review and respond.", sentiment: "negative", summary: "Criticizes short consultation period...", keywords: ["consultation", "short", "stakeholders"], provision: "Process" },
                    { id: 12, text: "I agree with the general direction of this policy. It aligns with our long-term strategic goals.", sentiment: "positive", summary: "Agrees with policy's overall direction...", keywords: ["policy", "direction", "strategic goals"], provision: "General" },
                ];
                
                let currentPage = 1, itemsPerPage = 5, filteredComments = [...mockComments], sentimentChart = null, provisionChartInstance = null;
                const tableBody = document.querySelector('#commentsTableBody'), searchInput = document.querySelector('#searchInput'), sentimentFilter = document.querySelector('#sentimentFilter'), paginationInfo = document.querySelector('#paginationInfo'), paginationControls = document.querySelector('#paginationControls'), commentTemplate = document.querySelector('#comment-row-template'), keywordListContainer = document.querySelector('#keyword-list'), navContainer = document.querySelector('#sidebar-nav'), navLinks = navContainer.querySelectorAll('.nav-link'), pageContents = document.querySelectorAll('#app-container .page-content');
                const logoutButton = document.getElementById('logout-button');
                const viewModal = document.getElementById('view-modal'), closeModalBtn = document.getElementById('close-modal-btn'), modalTitle = document.getElementById('modal-title'), modalProvision = document.getElementById('modal-provision'), modalSentiment = document.getElementById('modal-sentiment'), modalFullText = document.getElementById('modal-full-text');

                logoutButton.addEventListener('click', () => location.reload());
                navContainer.addEventListener('click', (e) => { const l=e.target.closest('.nav-link'); if(!l)return; e.preventDefault(); const id=l.dataset.target; navLinks.forEach(k=>{k.classList.remove('bg-indigo-100','text-indigo-600'); k.classList.add('text-slate-600','hover:bg-slate-100'); k.removeAttribute('aria-current');}); l.classList.add('bg-indigo-100','text-indigo-600'); l.classList.remove('text-slate-600','hover:bg-slate-100'); l.setAttribute('aria-current','page'); pageContents.forEach(p=>{p.classList.toggle('active',p.id===id);}); if(id==='page-reports'&&!provisionChartInstance)renderProvisionChart(mockComments); });
                
                function showModal(c) { modalTitle.textContent=`Comment #${c.id} Details`; modalProvision.textContent=`Regarding: ${c.provision}`; modalFullText.textContent=c.text; const sClasses={positive:'bg-green-100 text-green-800',negative:'bg-red-100 text-red-800',neutral:'bg-yellow-100 text-yellow-800'}; modalSentiment.innerHTML=`<span class="px-2 py-1 text-xs font-medium rounded-full ${sClasses[c.sentiment]}">${c.sentiment.charAt(0).toUpperCase()+c.sentiment.slice(1)}</span>`; viewModal.classList.remove('hidden'); }
                function closeModal() { viewModal.classList.add('hidden'); }
                closeModalBtn.addEventListener('click', closeModal);
                viewModal.addEventListener('click', (e) => { if (e.target === viewModal) closeModal(); });

                function calculateSentimentCounts(c){return c.reduce((a,c)=>{a[c.sentiment]=(a[c.sentiment]||0)+1;return a},{p:0,n:0,ne:0});}
                function updateDashboardStats(c){const cs=calculateSentimentCounts(c),t=c.length;document.getElementById('stat-total').textContent=t;document.getElementById('stat-positive').textContent=cs.positive||0;document.getElementById('stat-negative').textContent=cs.negative||0;document.getElementById('stat-neutral').textContent=cs.neutral||0;const p=(ct,tt)=>(tt===0?'0.0%':((ct/tt)*100).toFixed(1)+'%');document.getElementById('stat-positive-sub').textContent=`${p(cs.positive||0,t)} of total`;document.getElementById('stat-negative-sub').textContent=`${p(cs.negative||0,t)} of total`;document.getElementById('stat-neutral-sub').textContent=`${p(cs.neutral||0,t)} of total`;}
                function updateSentimentChart(c){const d=[c.positive||0,c.negative||0,c.neutral||0];if(sentimentChart){sentimentChart.data.datasets[0].data=d;sentimentChart.update();}else{sentimentChart=new Chart(document.getElementById('sentimentChart').getContext('2d'),{type:'doughnut',data:{labels:['Positive','Negative','Neutral'],datasets:[{data:d,backgroundColor:['#22c55e','#ef4444','#f59e0b'],borderColor:'#fff',borderWidth:4}]},options:{responsive:true,maintainAspectRatio:false,cutout:'70%',plugins:{legend:{position:'bottom',labels:{usePointStyle:true,pointStyle:'circle',padding:20}}}}});}}
                function updateKeywordList(c){const f=c.flatMap(c=>c.keywords).reduce((a,w)=>{a[w]=(a[w]||0)+1;return a},{});const s=Object.entries(f).sort((a,b)=>b[1]-a[1]).slice(0,15);keywordListContainer.innerHTML='';if(s.length===0){keywordListContainer.innerHTML='<p class="text-sm text-slate-500">No keywords found.</p>';return;}s.forEach(([k,c])=>{keywordListContainer.innerHTML+=`<div class="flex justify-between items-center text-sm pb-2 border-b border-slate-100"><span class="font-medium text-slate-700">${k}</span><span class="font-bold text-indigo-600 bg-indigo-100 px-2.5 py-0.5 rounded-full text-xs">${c}</span></div>`;});}
                function renderProvisionChart(a){const d=a.reduce((ac,c)=>{if(!ac[c.provision])ac[c.provision]={p:0,n:0,ne:0};ac[c.provision][c.sentiment.slice(0,2)]++;return ac},{});const l=Object.keys(d);const ds=[{label:'Positive',data:l.map(p=>d[p].po||0),backgroundColor:'#22c55e'},{label:'Negative',data:l.map(p=>d[p].ne||0),backgroundColor:'#ef4444'},{label:'Neutral',data:l.map(p=>d[p].nu||0),backgroundColor:'#f59e0b'}];provisionChartInstance=new Chart(document.getElementById('provisionChart').getContext('2d'),{type:'bar',data:{labels:l,datasets:ds},options:{responsive:true,maintainAspectRatio:false,scales:{x:{stacked:true},y:{stacked:true,beginAtZero:true}},plugins:{legend:{position:'bottom'}}}});}
                function renderTable(){tableBody.innerHTML='';const p=filteredComments.slice((currentPage-1)*itemsPerPage,currentPage*itemsPerPage);if(p.length===0){tableBody.innerHTML=`<tr><td colspan="5" class="text-center py-16"><div class="flex flex-col items-center"><svg class="h-16 w-16 text-slate-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /></svg><h3 class="mt-2 text-lg font-semibold text-slate-800">No Comments Found</h3><p class="mt-1 text-sm text-slate-500">Aapka search ya filter kisi bhi comment se match nahi hua.</p></div></td></tr>`;}else{const sC={positive:'bg-green-100 text-green-800',negative:'bg-red-100 text-red-800',neutral:'bg-yellow-100 text-yellow-800'};p.forEach(c=>{const cl=commentTemplate.content.cloneNode(true);cl.querySelector('tr').dataset.commentId=c.id;cl.querySelector('.data-summary').firstChild.textContent=c.summary;cl.querySelector('.data-text').textContent=`"${c.text}"`;cl.querySelector('.data-provision').textContent=c.provision;const sB=cl.querySelector('.data-sentiment');sB.textContent=c.sentiment.charAt(0).toUpperCase()+c.sentiment.slice(1);sB.className+=` ${sC[c.sentiment]}`;const kC=cl.querySelector('.data-keywords');c.keywords.forEach(k=>{const s=document.createElement('span');s.className='bg-slate-100 text-slate-700 text-xs font-medium px-2 py-0.5 rounded';s.textContent=k;kC.appendChild(s);});tableBody.appendChild(cl);});}renderPagination();}
                function renderPagination(){const tP=Math.ceil(filteredComments.length/itemsPerPage);paginationControls.innerHTML='';const pB=document.createElement('button');pB.innerHTML=`<svg class="h-5 w-5" viewBox="0 0 24 24"><path d="m15 18-6-6 6-6"/></svg>`;pB.className='px-2 py-1 rounded-md hover:bg-slate-100 disabled:opacity-50';pB.disabled=(currentPage===1);pB.onclick=()=>{if(currentPage>1){currentPage--;renderTable();}};paginationControls.appendChild(pB);for(let i=1;i<=tP;i++){const b=document.createElement('button');b.innerText=i;b.className=`px-3 py-1 rounded-md text-sm ${currentPage===i?'bg-indigo-600 text-white':'hover:bg-slate-100'}`;b.onclick=()=>{currentPage=i;renderTable();};paginationControls.appendChild(b);}const nB=document.createElement('button');nB.innerHTML=`<svg class="h-5 w-5" viewBox="0 0 24 24"><path d="m9 18 6-6-6-6"/></svg>`;nB.className='px-2 py-1 rounded-md hover:bg-slate-100 disabled:opacity-50';nB.disabled=(currentPage===tP||tP===0);nB.onclick=()=>{if(currentPage<tP){currentPage++;renderTable();}};paginationControls.appendChild(nB);const sI=filteredComments.length>0?(currentPage-1)*itemsPerPage+1:0;const eI=Math.min(currentPage*itemsPerPage,filteredComments.length);paginationInfo.textContent=`Showing ${sI}-${eI} of ${filteredComments.length} results`;}
                function applyFiltersAndRender(){const t=searchInput.value.toLowerCase(),s=sentimentFilter.value;filteredComments=mockComments.filter(c=>{const sM=c.text.toLowerCase().includes(t)||c.summary.toLowerCase().includes(t)||c.keywords.some(k=>k.toLowerCase().includes(t));const seM=s==='all'||c.sentiment===s;return sM&&seM;});currentPage=1;renderTable();updateDashboardStats(filteredComments);updateSentimentChart(calculateSentimentCounts(filteredComments));updateKeywordList(filteredComments);}
                searchInput.addEventListener('input',applyFiltersAndRender);sentimentFilter.addEventListener('change',applyFiltersAndRender);
                tableBody.addEventListener('click',function(e){const b=e.target.closest('.action-view, .action-flag');if(!b)return;const r=e.target.closest('tr');const id=r.dataset.commentId;const c=mockComments.find(cm=>cm.id==id);if(b.classList.contains('action-view')){showModal(c);}if(b.classList.contains('action-flag')){alert(`Flagging Comment #${id}: "${c.summary}"`);}});
                applyFiltersAndRender();
            }
        });
    </script>
</body>
</html>